{{ define "main" }}

  {{ with .Resources.GetMatch "cover.*" }}
    <img src="{{ .RelPermalink }}" width="{{ .Width }}" height="{{ .Height }}" alt="">
  {{ else }}
    {{ with .Resources.GetMatch "*.png" }}
      <img src="{{ .RelPermalink }}" width="{{ .Width }}" height="{{ .Height }}" alt="">
    {{ end }}
  {{ end }}

  <h1>{{ .Title }}</h1>

  {{ .Params.author }}
  {{ .ReadingTime }} min read

  {{ $dateMachine := .Date | time.Format "2006-01-02T15:04:05-07:00" }}
  {{ $dateHuman := .Date | time.Format ":date_medium" }}
  <time datetime="{{ $dateMachine }}">{{ $dateHuman }}</time>

  {{ .Content }}
  {{ partial "terms.html" (dict "taxonomy" "categories" "page" .) }}
  {{ partial "terms.html" (dict "taxonomy" "tags" "page" .) }}
{{ end }}
